<!doctype html>
<html lang="en">

<head>
  {% load static %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="generator" content="Jekyll v4.1.1">
  <title>Poker Night</title>
  <!-- Bootstrap core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="{%static 'css/style.css'%}">
</head>
<body class="bg-dark">
  <header class="sticky-top">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand px-2" href="/poker_night/home"><img class="logo" src="/static/img/poker_night.png" alt="Poker Night"></a>
        <div class="dropdown px-4">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
            Menu
          </button>
          <ul class="dropdown-menu dropdown-menu-end bg-secondary" aria-labelledby="dropdownMenu2">
            <li><a class="dropdown-item text-white" type="button" href="/poker_night/home"><img src="/static/img/home.svg" alt="Home Icon"> Home</a></li>
            <li><a class="dropdown-item text-white" type="button" href="/poker_night/{{this_user.id}}/my_events" ><img src="/static/img/grid.svg" alt="Grid Icon"> My Events</a></li>
            <li><a class="dropdown-item text-white" type="button" href="/poker_night/{{this_user.id}}/host"><img src="/static/img/calendar.svg" alt="Calendar Icon"> Host an Event</a></li>
            <li><hr class="dropdown-divider text-white"></li>
            <li><a class="dropdown-item text-white" type="button" href="/user/logout"><img src="/static/img/log-out.svg" alt="Logout Icon"> Logout</a></li>
          </ul>
        </div>
        </div>
      </div>
    </nav>
  </header>

  <main role="main">
    <section class="jumbotron text-center border-white" id="jumbotron">
      <div class="container">
        <div class="align-text-top">
          <h1 class="text-white">{{this_user.first_name}}'s Upcoming Events</h1>
        </div>
        <div class="btn-group-lg text-center">
          <a href="/poker_night/{{this_user.id}}/host" class="btn btn-primary my-2">Host an Event</a>
        </div>
      </div>
    </section>
    <div class="album py-5 bg-dark">
      <div class="container">
        <div class="row mb-4">
          {%if hosting_events%}
          <div class="col-md-12">
            <h2 class="text-white text-center mb-5">Hosting</h2>
          </div>
          {%endif%}
          {% for event in hosting_events %}
          <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-md">
              {%if event.tournament.id%}
              <img src="/static/img/cash_game_card.png" class="bd-placeholder-img card-img-top"></img>
              <div class="card-body d-flex flex-column">
                <h6 class="card-title"> {{event.hosted_by.first_name}} {{event.hosted_by.last_name}}'s
                  {{event.tournament.style}} Tournament</h6>
                <h6 class="card-text">{{event.scheduled_for|date}} at {{event.scheduled_for|time}}</h6>
                <p>
                  <div class="card-text">Buy-in: ${{event.tournament.buy_in}}</div>
                  <div class="card-text">Re-entries: {{event.tournament.re_entries}}</div>
                </p>
                <form  method = "POST" action="/poker_night/{{event.id}}/cancel" id="cancel{{event.id}}">
                  {%csrf_token%}
                </form>
                <form method = "POST" action="/poker_night/{{event.id}}/tournament/view" id="view{{event.id}}">
                  {%csrf_token%}
                </form>
                <div class="d-flex justify-content-between align-items-center mt-auto">
                  <div class="btn-group">
                    <button type="submit" class="btn btn-sm btn-danger" form="cancel{{event.id}}">Cancel</button>
                    <button type="submit" class="btn btn-sm btn-primary" form="view{{event.id}}">View</button>
                  </div>
                  <small class="text-muted mt-auto">Players:
                    {%if event.attendees.count == event.max_players%}
                    <span>Full</span>
                    {%else%}
                    <span>{{event.attendees.count}}/{{event.max_players}}</span>
                    {%endif%}
                  </small>
                </div>
              </div>
              {%else%}
              <img src="/static/img/tournament_card.jpeg" class="bd-placeholder-img card-img-top" ></img>
              <div class="card-body d-flex flex-column">
                <h6 class="card-title"> {{event.hosted_by.first_name}} {{event.hosted_by.last_name}}'s
                  {{event.cash_game.stakes}} Cash Game</h6>
                <h6 class="card-text">{{event.scheduled_for|date}} at {{event.scheduled_for|time}}</h6>
                <p>
                  <div class="card-text">Min Buy-in: ${{event.cash_game.min_buy}}</div>
                  <div class="card-text">Max Buy-in: ${{event.cash_game.max_buy}}</div>
                </p>
                <form  method = "POST" action="/poker_night/{{event.id}}/cancel" id="cancel{{event.id}}">
                  {%csrf_token%}
                </form>
                <form method = "POST" action="/poker_night/{{event.id}}/cash_game/view" id="view{{event.id}}">
                  {%csrf_token%}
                </form>
                <div class="d-flex justify-content-between align-items-center mt-auto">
                  <div class="btn-group">
                    <button type="submit" class="btn btn-sm btn-danger" form="cancel{{event.id}}">Cancel</button>
                    <button type="submit" class="btn btn-sm btn-primary" form="view{{event.id}}" >View</button>
                  </div>
                  <small class="text-muted">Players:
                    {%if event.attendees.count == event.max_players%}
                    <span>Full</span>
                    {%else%}
                    <span>{{event.attendees.count}}/{{event.max_players}}</span>
                    {%endif%}
                  </small>
                </div>
              </div>
              {%endif%}
            </div>
          </div>
          {%endfor%}
        </div>
        <div class="row ">
          {%if attending_events%}
          <div class="col-md-12 ">
            <h2 class="text-white text-center mt-5 mb-5">Attending</h2>
          </div>
          {%endif%}
          {% for event in attending_events %}
          <div class="col-md-3">
            <div class="card mb-4 d-flex h-100 shadow-md">
              {%if event.tournament.id%}
              <img src="/static/img/cash_game_card.png" class="bd-placeholder-img card-img-top" width="100%" height="200"></img>
              <div class="card-body d-flex flex-column">
                <h6 class="card-title"> {{event.hosted_by.first_name}} {{event.hosted_by.last_name}}'s
                  {{event.tournament.style}} Tournament</h6>
                <h6 class="card-text">{{event.scheduled_for|date}} at {{event.scheduled_for|time}}</h6>
                <p>
                  <div class="card-text">Buy-in: ${{event.tournament.buy_in}}</div>
                  <div class="card-text">Re-entries: {{event.tournament.re_entries}}</div>
                </p>
                <form  method = "POST" action="/poker_night/{{event.id}}/unregister" id="unregister{{event.id}}">
                  {%csrf_token%}
                </form>
                <form method = "POST" action="/poker_night/{{event.id}}/tournament/view" id="view{{event.id}}">
                  {%csrf_token%}
                </form>
                <div class="d-flex justify-content-between align-items-center mt-auto">
                  <div class="btn-group">
                    <button type="submit" class="btn btn-sm btn-danger" form="unregister{{event.id}}">Unregister</button>
                    <button type="submit" class="btn btn-sm btn-primary" form="view{{event.id}}">View</button>
                  </div>
                  <small class="text-muted">Players:
                    {%if event.attendees.count == event.max_players%}
                    <span>Full</span>
                    {%else%}
                    <span>{{event.attendees.count}}/{{event.max_players}}</span>
                    {%endif%}
                  </small>
                </div>
              </div>
              {%else%}
              <img src="/static/img/tournament_card.jpeg" class="bd-placeholder-img card-img-top" width="100%" height="200"></img>
              <div class="card-body d-flex flex-column ">
                <h6 class="card-title"> {{event.hosted_by.first_name}} {{event.hosted_by.last_name}}'s
                  {{event.cash_game.stakes}} Cash Game</h6>
                <h6 class="card-text">{{event.scheduled_for|date}} at {{event.scheduled_for|time}}</h6>
                <p>
                  <div class="card-text">Min Buy-in: ${{event.cash_game.min_buy}}</div>
                  <div class="card-text">Max Buy-in: ${{event.cash_game.max_buy}}</div>
                </p>
                <form  method = "POST" action="/poker_night/{{event.id}}/unregister" id="unregister{{event.id}}">
                  {%csrf_token%}
                </form>
                <form method = "POST" action="/poker_night/{{event.id}}/cash_game/view" id="view{{event.id}}">
                  {%csrf_token%}
                </form>
                <div class="d-flex justify-content-between align-items-center mt-auto">
                  <div class="btn-group">
                    <button type="submit" class="btn btn-sm btn-danger " form="unregister{{event.id}}">Unregister</button>
                    <button type="submit" class="btn btn-sm btn-primary"form="view{{event.id}}" >View</button>
                  </div>
                  <small class="text-muted">Players:
                    {%if event.attendees.count == event.max_players%}
                    <span>Full</span>
                    {%else%}
                    <span>{{event.attendees.count}}/{{event.max_players}}</span>
                    {%endif%}
                  </small>
                </div>
              </div>
              {%endif%}
            </div>
          </div>
          {%endfor%}
        </div>
      </div>
  </main>

    <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</html>